(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{128:function(e,t,a){e.exports=a(264)},133:function(e,t,a){},134:function(e,t,a){},264:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(12),o=a.n(i),u=(a(133),a(96),a(134),a(40)),l=a(41),c=a(45),m=a(42),s=a(46),d=a(4),b=(a(47),a(66)),h=a(116),E=a(28),g=a(125),f=a(33),p=a(51),v=a.n(p),S=a(21),j=a.n(S),y="";var O=n.a.createContext(),k=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(c.a)(this,Object(m.a)(t).call(this))).state={buildings:[],rooms:[]},e.addBuilding=e.addBuilding.bind(Object(d.a)(Object(d.a)(e))),e.addRoom=e.addRoom.bind(Object(d.a)(Object(d.a)(e))),e.addUpdateRoom=e.addUpdateRoom.bind(Object(d.a)(Object(d.a)(e))),e.deleteBuilding=e.deleteBuilding.bind(Object(d.a)(Object(d.a)(e))),e.deleteRoom=e.deleteRoom.bind(Object(d.a)(Object(d.a)(e))),e.getRooms=e.getRooms.bind(Object(d.a)(Object(d.a)(e))),e.selectBuilding=e.selectBuilding.bind(Object(d.a)(Object(d.a)(e))),e.selectRoom=e.selectRoom.bind(Object(d.a)(Object(d.a)(e))),e.updateBuilding=e.updateBuilding.bind(Object(d.a)(Object(d.a)(e))),e}return Object(s.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;j.a.get("".concat(y,"/buildings/")).then(function(t){var a=t.data,r=v.a.sortBy(Object(f.a)(a.map(function(e){var t=e.name,a=e.address,r=e.landmarks,n=e.id,i=Object(g.a)(r,3);return{name:t,address:a,landmark1:i[0],landmark2:i[1],landmark3:i[2],id:n}})),"id");e.setState({buildings:r})})}},{key:"getRooms",value:function(e){var t,a=this;this.setState({rooms:[]}),(t=e,j.a.get("".concat(y,"/buildings/").concat(t,"/rooms/"))).then(function(e){var t=e.data;return a.setState({rooms:t})})}},{key:"deleteBuilding",value:function(){var e,t=this,a=this.state.buildings.find(function(e){return e.selected});return(e=a.id,j.a.delete("".concat(y,"/buildings/").concat(e,"/"))).then(function(){t.setState(function(e){return{buildings:e.buildings.filter(function(e){return e.id!==a.id})}})})}},{key:"deleteRoom",value:function(){var e,t,a=this,r=this.state,n=r.buildings,i=r.rooms,o=n.find(function(e){return e.selected}),u=i.find(function(e){return e.selected});return(e=o.id,t=u.id,j.a.delete("".concat(y,"/buildings/").concat(e,"/rooms/").concat(t,"/"))).then(function(){a.setState(function(e){return{rooms:e.rooms.filter(function(e){return e.id!==u.id})}})})}},{key:"selectBuilding",value:function(e){var t=this;this.setState(function(t){return{buildings:t.buildings.map(function(t){return Object(E.a)({},t,{selected:t.id===e})})}},function(){t.getRooms(e)})}},{key:"selectRoom",value:function(e){this.setState(function(t){return{rooms:t.rooms.map(function(t){return Object(E.a)({},t,{selected:t.id===e})})}})}},{key:"updateBuildingState",value:function(e){this.setState(function(t){return{buildings:v.a.sortBy(Object(f.a)(t.buildings.map(function(t){return t.id===e.id?e:t})),"id")}})}},{key:"updateRoomState",value:function(e){var t=e.isNew,a=Object(h.a)(e,["isNew"]);t?this.setState(function(e){return{rooms:v.a.sortBy([].concat(Object(f.a)(e.rooms.filter(function(e){return e.id})),[a]),"id")}}):this.setState(function(e){return{rooms:v.a.sortBy(Object(f.a)(e.rooms.map(function(e){return e.id===a.id?a:e})),"id")}})}},{key:"updateBuilding",value:function(e){var t=this;return new Promise(function(a){(function(e){var t=e.name,a=e.address,r=e.landmark1,n=e.landmark2,i=e.landmark3,o=e.id,u={name:t,address:a,landmarks:[r,n,i].filter(function(e){return e})};return j.a.put("".concat(y,"/buildings/").concat(o,"/"),u)})(e).then(function(e){var r=e.data;t.updateBuildingState(Object(E.a)({},r,{selected:!0})),a()}).catch(function(e){a(e.response.data)})})}},{key:"addBuilding",value:function(e){var t=this;return function(e){var t={name:e.name,address:e.address,landmarks:[e.landmark1,e.landmark2,e.landmark3].filter(function(e){return e})};return j.a.post("".concat(y,"/buildings/"),t)}(e).then(function(e){var a=e.data;t.setState(function(e){return{buildings:[].concat(Object(f.a)(e.buildings),[a])}})})}},{key:"addRoom",value:function(e){this.setState(function(t){return{rooms:[].concat(Object(f.a)(t.rooms),[Object(E.a)({},e,{selected:!0})])}})}},{key:"addUpdateRoom",value:function(e){var t=this,a=this.state.buildings.find(function(e){return e.selected});return new Promise(function(r){(function(e){var t=e.flat_number,a=e.room_type,r=e.bathrooms_count,n=e.area,i=e.rent,o=e.maintenance_amount,u=e.electricity_account_number,l=e.buildingId,c=e.id,m={flat_number:t,room_type:a,bathrooms_count:r,area:n,rent:i,maintenance_amount:o,electricity_account_number:u};return c?j.a.put("".concat(y,"/buildings/").concat(l,"/rooms/").concat(c,"/"),m):j.a.post("".concat(y,"/buildings/").concat(l,"/rooms/"),m)})(Object(E.a)({},e,{buildingId:a.id})).then(function(a){var n=a.data;t.updateRoomState(Object(E.a)({},n,{selected:!0,isNew:!e.id})),r()}).catch(function(e){r(e.response.data)})})}},{key:"render",value:function(){var e=this.props.children;return n.a.createElement(O.Provider,{value:Object(E.a)({},this.state,{addBuilding:this.addBuilding,addRoom:this.addRoom,addUpdateRoom:this.addUpdateRoom,deleteBuilding:this.deleteBuilding,deleteRoom:this.deleteRoom,selectBuilding:this.selectBuilding,selectRoom:this.selectRoom,updateBuilding:this.updateBuilding})},e)}}]),t}(n.a.Component),B=O.Consumer,R=function(e){var t=e.building,a=e.onSelect;return n.a.createElement("div",{className:"buildingItem ".concat(t.selected?"selected":""),onClick:function(){return a(t.id)}},n.a.createElement("span",{className:"bHeader"},t.name),n.a.createElement("span",null,"id: ".concat(t.id)))},N=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={},a.onChange=a.onChange.bind(Object(d.a)(Object(d.a)(a))),a.onSubmit=a.onSubmit.bind(Object(d.a)(Object(d.a)(a))),a}return Object(s.a)(t,e),Object(l.a)(t,[{key:"onChange",value:function(e){console.log(e.target.name);var t=this.state;t[e.target.name]=e.target.value,this.setState(t),console.log(this.state)}},{key:"onSubmit",value:function(e){e.preventDefault();var t=this.props.onSubmit;t({name:"No Name",address:"No Address"})}},{key:"render",value:function(){return n.a.createElement("div",{className:"addBuildingFrm"},n.a.createElement(b.a,{onClick:this.onSubmit,type:"primary"},"Add New Building"))}}]),t}(n.a.Component),_=function(){return n.a.createElement(B,null,function(e){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"buildings"},n.a.createElement("div",{className:"buildings-group"},e.buildings.map(function(t){return n.a.createElement(R,{key:t.id,building:t,onSelect:e.selectBuilding})})),!e.buildings.length&&n.a.createElement("span",{className:"empty"},"Start by adding a Building"),n.a.createElement(N,{onSubmit:e.addBuilding})))})},L=function(e){var t=e.room,a=e.onSelect;return n.a.createElement("div",{className:"buildingItem ".concat(t.selected?"selected":""),onClick:function(){return a(t.id)}},n.a.createElement("span",{className:"bHeader ".concat(t.flat_number?"":"faded")},t.flat_number||"New Room"),n.a.createElement("span",null,"Type: ".concat(t.room_type||"")))},w=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={},a.onChange=a.onChange.bind(Object(d.a)(Object(d.a)(a))),a.onSubmit=a.onSubmit.bind(Object(d.a)(Object(d.a)(a))),a}return Object(s.a)(t,e),Object(l.a)(t,[{key:"onChange",value:function(e){console.log(e.target.name);var t=this.state;t[e.target.name]=e.target.value,this.setState(t),console.log(this.state)}},{key:"onSubmit",value:function(e){e.preventDefault();var t=this.props.onSubmit;t({flat_number:null,room_type:null,bathrooms_count:null,area:null,rent:null,maintenance_amount:null,electricity_account_number:null})}},{key:"render",value:function(){return n.a.createElement("div",{className:"addRoomFrm"},n.a.createElement(b.a,{onClick:this.onSubmit,type:"primary"},"Add New Room"))}}]),t}(n.a.Component),C=function(e){var t=e.buildings,a=e.rooms,r=e.selectRoom,i=e.addRoom,o=t.find(function(e){return e.selected}),u=a.find(function(e){return!e.id});return o&&n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"buildings-group"},a.map(function(e){return n.a.createElement(L,{key:e.id,room:e,onSelect:r})})),!a.length&&n.a.createElement("span",{className:"empty"},"No Rooms in this Building"),!u&&n.a.createElement(w,{onSubmit:i}))||n.a.createElement("span",{className:"empty"},"No Building Selected")},I=function(){return n.a.createElement(B,null,function(e){return n.a.createElement("div",{className:"rooms"},n.a.createElement(C,e))})},A=a(9),D=a(265),H=a(266),F=function(e){return e?void 0:"Required"},K=function(e){var t=e.initialValues,a=e.onSubmit,r=e.onDelete;return n.a.createElement(A.b,{initialValues:t,onSubmit:a,render:function(e){var t=e.handleSubmit,a=e.pristine,i=e.values;return n.a.createElement("form",{onSubmit:t},n.a.createElement("h2",null,"Building"),n.a.createElement(A.a,{name:"name",validate:F},function(e){var t=e.input,a=e.meta;return n.a.createElement(D.a.Item,{label:"Name",validateStatus:!a.dirtySinceLastSubmit&&a.submitError&&a.submitError.length||a.error&&a.touched?"error":"",help:a.submitError&&a.submitError.length&&a.submitError.join(",")||a.error&&a.touched&&a.error},n.a.createElement(H.a,Object.assign({},t,{placeholder:"Name"})))}),n.a.createElement(A.a,{name:"address",validate:F},function(e){var t=e.input,a=e.meta;return n.a.createElement(D.a.Item,{label:"Address",validateStatus:!a.dirtySinceLastSubmit&&a.submitError&&a.submitError.length||a.error&&a.touched?"error":"",help:a.submitError&&a.submitError.length&&a.submitError.join(",")||a.error&&a.touched&&a.error},n.a.createElement(H.a,Object.assign({},t,{placeholder:"Address"})))}),n.a.createElement(A.a,{name:"landmark1"},function(e){var t=e.input,a=e.meta;return n.a.createElement(D.a.Item,{label:"Landmark 1",validateStatus:!a.dirtySinceLastSubmit&&a.submitError&&a.submitError.length||a.error&&a.touched?"error":"",help:a.submitError&&a.submitError.length&&a.submitError.join(",")||a.error&&a.touched&&a.error},n.a.createElement(H.a,Object.assign({},t,{placeholder:"Landmark"})))}),n.a.createElement(A.a,{name:"landmark2"},function(e){var t=e.input,a=e.meta;return n.a.createElement(D.a.Item,{label:"Landmark 2",validateStatus:!a.dirtySinceLastSubmit&&a.submitError&&a.submitError.length||a.error&&a.touched?"error":"",help:a.submitError&&a.submitError.length&&a.submitError.join(",")||a.error&&a.touched&&a.error},n.a.createElement(H.a,Object.assign({},t,{placeholder:"Landmark"})))}),n.a.createElement(A.a,{name:"landmark3"},function(e){var t=e.input,a=e.meta;return n.a.createElement(D.a.Item,{label:"Landmark 3",validateStatus:!a.dirtySinceLastSubmit&&a.submitError&&a.submitError.length||a.error&&a.touched?"error":"",help:a.submitError&&a.submitError.length&&a.submitError.join(",")||a.error&&a.touched&&a.error},n.a.createElement(H.a,Object.assign({},t,{placeholder:"Landmark"})))}),n.a.createElement(b.a,{type:"primary",htmlType:"submit",disabled:a},"Save"),n.a.createElement(b.a,{type:"danger",onClick:r,disabled:!i||!i.id},"Delete"))}})},U=a(267),V=function(e){var t=e.initialValues,a=e.onSubmit,r=e.onDelete;return n.a.createElement(A.b,{initialValues:t,onSubmit:a,render:function(e){var t=e.handleSubmit,a=e.pristine,i=e.values;return n.a.createElement("form",{onSubmit:t},n.a.createElement("h2",null,"Room"),n.a.createElement(A.a,{name:"flat_number"},function(e){var t=e.input,a=e.meta;return n.a.createElement(D.a.Item,{label:"Flat Number",validateStatus:!a.dirtySinceLastSubmit&&a.submitError&&a.submitError.length||a.error&&a.touched?"error":"",help:a.submitError&&a.submitError.length&&a.submitError.join(",")||a.error&&a.touched&&a.error},n.a.createElement(H.a,Object.assign({},t,{placeholder:"Name"})))}),n.a.createElement(A.a,{name:"room_type"},function(e){var t=e.input,a=e.meta;return n.a.createElement(D.a.Item,{label:"Room Type",validateStatus:!a.dirtySinceLastSubmit&&a.submitError&&a.submitError.length||a.error&&a.touched?"error":"",help:a.submitError&&a.submitError.length&&a.submitError.join(",")||a.error&&a.touched&&a.error},n.a.createElement(U.a.Group,t,n.a.createElement(U.a,{value:"1 BHK"},"1 BHK"),n.a.createElement(U.a,{value:"2 BHK"},"2 BHK"),n.a.createElement(U.a,{value:"3 BHK"},"3 BHK"),n.a.createElement(U.a,{value:"Studio"},"Studio")))}),n.a.createElement(A.a,{name:"bathrooms_count"},function(e){var t=e.input,a=e.meta;return n.a.createElement(D.a.Item,{label:"Bathrooms",validateStatus:!a.dirtySinceLastSubmit&&a.submitError&&a.submitError.length||a.error&&a.touched?"error":"",help:a.submitError&&a.submitError.length&&a.submitError.join(",")||a.error&&a.touched&&a.error},n.a.createElement(H.a,Object.assign({},t,{placeholder:"Landmark"})))}),n.a.createElement(A.a,{name:"area"},function(e){var t=e.input,a=e.meta;return n.a.createElement(D.a.Item,{label:"Area",validateStatus:!a.dirtySinceLastSubmit&&a.submitError&&a.submitError.length||a.error&&a.touched?"error":"",help:a.submitError&&a.submitError.length&&a.submitError.join(",")||a.error&&a.touched&&a.error},n.a.createElement(H.a,Object.assign({},t,{placeholder:"Landmark"})))}),n.a.createElement(A.a,{name:"rent"},function(e){var t=e.input,a=e.meta;return n.a.createElement(D.a.Item,{label:"Rent",validateStatus:!a.dirtySinceLastSubmit&&a.submitError&&a.submitError.length||a.error&&a.touched?"error":"",help:a.submitError&&a.submitError.length&&a.submitError.join(",")||a.error&&a.touched&&a.error},n.a.createElement(H.a,Object.assign({},t,{placeholder:"Landmark"})))}),n.a.createElement(A.a,{name:"maintenance_amount"},function(e){var t=e.input,a=e.meta;return n.a.createElement(D.a.Item,{label:"Maintenance Amount",validateStatus:!a.dirtySinceLastSubmit&&a.submitError&&a.submitError.length||a.error&&a.touched?"error":"",help:a.submitError&&a.submitError.length&&a.submitError.join(",")||a.error&&a.touched&&a.error},n.a.createElement(H.a,Object.assign({},t,{placeholder:"Landmark"})))}),n.a.createElement(A.a,{name:"electricity_account_number"},function(e){var t=e.input,a=e.meta;return n.a.createElement(D.a.Item,{label:"Electricity Account Number",validateStatus:!a.dirtySinceLastSubmit&&a.submitError&&a.submitError.length||a.error&&a.touched?"error":"",help:a.submitError&&a.submitError.length&&a.submitError.join(",")||a.error&&a.touched&&a.error},n.a.createElement(H.a,Object.assign({},t,{placeholder:"Landmark"})))}),n.a.createElement(b.a,{type:"primary",htmlType:"submit",disabled:a},"Save"),n.a.createElement(b.a,{type:"danger",onClick:r,disabled:!i||!i.id},"Delete"))}})};function T(e){var t=e.buildings,a=e.rooms,r=e.deleteBuilding,i=e.updateBuilding,o=e.addUpdateRoom,u=e.deleteRoom,l=t.find(function(e){return e.selected}),c=a.find(function(e){return e.selected});return n.a.createElement(n.a.Fragment,null,l&&n.a.createElement(K,{onDelete:r,onSubmit:i,initialValues:l}),c&&n.a.createElement(V,{onDelete:u,onSubmit:o,initialValues:c}),!l&&n.a.createElement("span",{className:"empty"},"No Building Selected"))}var P=function(){return n.a.createElement(B,null,function(e){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"editor"},n.a.createElement(T,e)))})},x=function(){return n.a.createElement("div",{className:"App"},n.a.createElement(k,null,n.a.createElement("h2",{className:"head"},"Rooms"),n.a.createElement("div",{className:"container"},n.a.createElement(_,null),n.a.createElement(I,null),n.a.createElement(P,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},47:function(e,t,a){}},[[128,1,2]]]);
//# sourceMappingURL=main.e8f7087e.chunk.js.map